{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/api/auth/code":{"post":{"tags":["auth"],"summary":"Api Generate Auth Code","operationId":"api_generate_auth_code_api_auth_code_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiAuthCodeResponse"}}}}}}},"/api/auth/code/exchange":{"post":{"tags":["auth"],"summary":"Api Login","operationId":"api_login_api_auth_code_exchange_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiCodeExchangeBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiCodeExchangeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/refresh":{"post":{"tags":["auth"],"summary":"Api Refresh","operationId":"api_refresh_api_auth_refresh_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiCodeExchangeResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/demo/protected":{"post":{"tags":["demo"],"summary":"Api Protected Demo","operationId":"api_protected_demo_api_demo_protected_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/survey/stages/{stage_id}/questions":{"get":{"tags":["survey","questions"],"summary":"Read Questions","operationId":"read_questions_api_survey_stages__stage_id__questions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"stage_id","in":"path","required":true,"schema":{"type":"integer","title":"Stage Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Количество элементов для пропуска","default":0,"title":"Skip"},"description":"Количество элементов для пропуска"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Лимит количества возвращаемых элементов","default":10,"title":"Limit"},"description":"Лимит количества возвращаемых элементов"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_QuestionResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/survey/stages/{stage_id}/questions/{question_id}":{"get":{"tags":["survey","questions"],"summary":"Read Question","operationId":"read_question_api_survey_stages__stage_id__questions__question_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"stage_id","in":"path","required":true,"schema":{"type":"integer","title":"Stage Id"}},{"name":"question_id","in":"path","required":true,"schema":{"type":"integer","title":"Question Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/survey/stages":{"get":{"tags":["survey","stages"],"summary":"Read Stages","operationId":"read_stages_api_survey_stages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Количество элементов для пропуска","default":0,"title":"Skip"},"description":"Количество элементов для пропуска"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Лимит количества возвращаемых элементов","default":10,"title":"Limit"},"description":"Лимит количества возвращаемых элементов"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_Stage_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/survey/stages/{stage_id}":{"get":{"tags":["survey","stages"],"summary":"Read Stage","operationId":"read_stage_api_survey_stages__stage_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"stage_id","in":"path","required":true,"schema":{"type":"integer","title":"Stage Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Stage"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/survey/stages/{stage_id}/questions/{question_id}/answers":{"get":{"tags":["survey","answers"],"summary":"Read Answers","operationId":"read_answers_api_survey_stages__stage_id__questions__question_id__answers_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"stage_id","in":"path","required":true,"schema":{"type":"integer","title":"Stage Id"}},{"name":"question_id","in":"path","required":true,"schema":{"type":"integer","title":"Question Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Количество элементов для пропуска","default":0,"title":"Skip"},"description":"Количество элементов для пропуска"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Лимит количества возвращаемых элементов","default":10,"title":"Limit"},"description":"Лимит количества возвращаемых элементов"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_AnswerResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/survey/stages/{stage_id}/fill":{"post":{"tags":["survey","stages"],"summary":"Fill Stage","operationId":"fill_stage_api_survey_stages__stage_id__fill_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"stage_id","in":"path","required":true,"schema":{"type":"integer","title":"Stage Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StageFillBody"},"title":"Answers"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/profile/profile/me":{"get":{"tags":["profile","profile"],"summary":"Get My Profile","operationId":"get_my_profile_api_profile_profile_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileResponse"}}}}}}},"/api/search/":{"get":{"tags":["search","search"],"summary":"Get My Profile","operationId":"get_my_profile_api_search__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Количество элементов для пропуска","default":0,"title":"Skip"},"description":"Количество элементов для пропуска"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Лимит количества возвращаемых элементов","default":10,"title":"Limit"},"description":"Лимит количества возвращаемых элементов"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Animal":{"type":"integer","enum":[1,2],"title":"Animal"},"AnswerResponse":{"properties":{"number":{"type":"integer","title":"Number","description":"Номер варианта ответа"},"value":{"type":"string","title":"Value","description":"Текст значения варианта ответа"}},"type":"object","required":["number","value"],"title":"AnswerResponse"},"ApiAuthCodeResponse":{"properties":{"code":{"type":"string","title":"Code"},"tg_auth_uri":{"type":"string","title":"Tg Auth Uri"}},"type":"object","required":["code","tg_auth_uri"],"title":"ApiAuthCodeResponse"},"ApiCodeExchangeBody":{"properties":{"code":{"type":"string","title":"Code"}},"type":"object","required":["code"],"title":"ApiCodeExchangeBody"},"ApiCodeExchangeResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"expires_in":{"type":"integer","title":"Expires In"},"refresh_token":{"type":"string","title":"Refresh Token"},"refresh_expires_in":{"type":"integer","title":"Refresh Expires In"}},"type":"object","required":["access_token","expires_in","refresh_token","refresh_expires_in"],"title":"ApiCodeExchangeResponse"},"DayPeriod":{"type":"integer","enum":[1,2],"title":"DayPeriod"},"DecisionsType":{"type":"integer","enum":[1,2],"title":"DecisionsType"},"Dessert":{"type":"integer","enum":[1,2],"title":"Dessert"},"Drink":{"type":"integer","enum":[1,2],"title":"Drink"},"Expression":{"type":"integer","enum":[1,2],"title":"Expression"},"Family":{"type":"integer","enum":[1,2],"title":"Family"},"Food":{"type":"integer","enum":[1,2],"title":"Food"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Housing":{"type":"integer","enum":[1,2],"title":"Housing"},"Kids":{"type":"integer","enum":[1,2,3,4],"title":"Kids"},"LifestyleType":{"type":"integer","enum":[1,2],"title":"LifestyleType"},"Love":{"type":"integer","enum":[1,2],"title":"Love"},"PaginatedResponse_AnswerResponse_":{"properties":{"data":{"items":{"$ref":"#/components/schemas/AnswerResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"skip":{"type":"integer","title":"Skip"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["data","total","skip","limit"],"title":"PaginatedResponse[AnswerResponse]"},"PaginatedResponse_QuestionResponse_":{"properties":{"data":{"items":{"$ref":"#/components/schemas/QuestionResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"skip":{"type":"integer","title":"Skip"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["data","total","skip","limit"],"title":"PaginatedResponse[QuestionResponse]"},"PaginatedResponse_Stage_":{"properties":{"data":{"items":{"$ref":"#/components/schemas/Stage"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"skip":{"type":"integer","title":"Skip"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["data","total","skip","limit"],"title":"PaginatedResponse[Stage]"},"PersonalityType":{"type":"integer","enum":[1,2],"title":"PersonalityType"},"QuestionResponse":{"properties":{"serial_number":{"type":"integer","title":"Serial Number","description":"Порядковый номер вопроса"},"answer_option_ids":{"items":{"type":"integer"},"type":"array","title":"Answer Option Ids","description":"Список ID вариантов ответа"},"answer_type":{"type":"integer","title":"Answer Type","description":"Тип ответа"},"count_answer":{"type":"integer","title":"Count Answer","description":"Количество ответов на вопрос"},"is_filtering_question":{"type":"boolean","title":"Is Filtering Question","description":"Используется ли для фильтрации"},"is_gender_influential":{"type":"boolean","title":"Is Gender Influential","description":"Влияет ли на гендер"},"is_included_in_selection":{"type":"boolean","title":"Is Included In Selection","description":"Включен ли в выборку"},"is_private":{"type":"boolean","title":"Is Private","description":"Является ли приватным"},"is_required":{"type":"boolean","title":"Is Required","description":"Обязателен ли вопрос"},"is_multi_answer":{"type":"boolean","title":"Is Multi Answer","description":"Обязателен ли вопрос"},"question_image":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Question Image","description":"Изображение для вопроса"},"short_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Short Text","description":"Короткий текст вопроса"},"text":{"type":"string","title":"Text","description":"Текст вопроса"}},"type":"object","required":["serial_number","answer_type","count_answer","is_filtering_question","is_gender_influential","is_included_in_selection","is_private","is_required","is_multi_answer","text"],"title":"QuestionResponse"},"Rest":{"type":"integer","enum":[1,2],"title":"Rest"},"Season":{"type":"integer","enum":[1,2,3,4],"title":"Season"},"Sleep":{"type":"integer","enum":[1,2],"title":"Sleep"},"Sport":{"type":"integer","enum":[1,2],"title":"Sport"},"Stage":{"properties":{"_id":{"anyOf":[{"type":"string","example":"5eb7cf5a86d9755df3a6c593"},{"type":"null"}],"title":" Id","description":"MongoDB document ObjectID"},"description":{"type":"string","title":"Description","description":"Описание этапа"},"is_mandatory":{"type":"boolean","title":"Is Mandatory","description":"Обязателен ли этап"},"serial_number":{"type":"integer","title":"Serial Number","description":"Порядковый номер"},"stages_to_unlock":{"items":{"type":"integer"},"type":"array","title":"Stages To Unlock","description":"Этапы, которые откроются после прохождения текущего"},"title":{"type":"string","title":"Title","description":"Название этапа"},"total_answers_count":{"type":"integer","title":"Total Answers Count","description":"Общее количество ответов"}},"type":"object","required":["description","is_mandatory","serial_number","title","total_answers_count"],"title":"Stage"},"StageFillBody":{"properties":{"question_serial_number":{"type":"integer","title":"Question Serial Number"},"answer_number":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Answer Number"},"answer_input":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Answer Input"}},"type":"object","required":["question_serial_number","answer_number","answer_input"],"title":"StageFillBody"},"Taste":{"type":"integer","enum":[1,2],"title":"Taste"},"ThinkingType":{"type":"integer","enum":[1,2],"title":"ThinkingType"},"Touch":{"type":"integer","enum":[1,2],"title":"Touch"},"UserInterests":{"properties":{"family":{"type":"string"},"kids":{"type":"string"},"personality_type":{"type":"string"},"thinking_type":{"type":"string"},"decisions_type":{"type":"string"},"lifestyle_type":{"type":"string"}},"type":"object","required":["family","kids","personality_type","thinking_type","decisions_type","lifestyle_type"],"title":"UserInterests"},"UserProfileResponse":{"properties":{"name":{"type":"string","maxLength":100,"title":"Name"},"location":{"type":"string","maxLength":300,"title":"Location"},"gender":{"type":"string","title":"Gender"},"height":{"type":"integer","maximum":230.0,"minimum":130.0,"exclusiveMinimum":0.0,"title":"Height"},"birth_date":{"type":"string","format":"date","title":"Birth Date"},"zodiac_sign":{"type":"string","title":"Zodiac Sign"},"work_type":{"type":"string","title":"Work Type"},"lifestyle":{"type":"string","title":"Lifestyle"},"education":{"type":"string","title":"Education"},"marital_status":{"type":"string","title":"Marital Status"},"element":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Element"},"superpower":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Superpower"},"dating_type":{"type":"string","title":"Dating Type"},"communication":{"type":"string","title":"Communication"},"faith_in_gender_friendship":{"type":"string","title":"Faith In Gender Friendship"},"mood_enhancement":{"anyOf":[{"type":"string","maxLength":150},{"type":"null"}],"title":"Mood Enhancement"},"thoughts":{"anyOf":[{"type":"string","maxLength":300},{"type":"null"}],"title":"Thoughts"},"interests":{"anyOf":[{"$ref":"#/components/schemas/UserInterests"},{"type":"null"}]},"quick_survey":{"anyOf":[{"$ref":"#/components/schemas/UserQuickSurvey"},{"type":"null"}]},"age":{"type":"integer","title":"Age","readOnly":true}},"type":"object","required":["name","location","gender","height","birth_date","zodiac_sign","work_type","lifestyle","education","marital_status","dating_type","communication","faith_in_gender_friendship","thoughts","age"],"title":"UserProfileResponse"},"UserQuickSurvey":{"properties":{"animal":{"type":"string"},"housing":{"type":"string"},"vacation":{"type":"string"},"love":{"type":"string"},"touch":{"type":"string"},"sport":{"type":"string"},"expression":{"type":"string"},"drink":{"type":"string"},"food":{"type":"string"},"sleep":{"type":"string"},"day_period":{"type":"string"},"dessert":{"type":"string"},"taste":{"type":"string"},"season":{"type":"string"},"rest":{"type":"string"}},"type":"object","required":["animal","housing","vacation","love","touch","sport","expression","drink","food","sleep","day_period","dessert","taste","season","rest"],"title":"UserQuickSurvey"},"Vacation":{"type":"integer","enum":[1,2],"title":"Vacation"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}